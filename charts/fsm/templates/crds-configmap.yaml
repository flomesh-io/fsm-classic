apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.fsm.configmaps.crds.name }}
  namespace: {{ include "fsm.namespace" . }}
  labels:
    {{- include "fsm.labels" . | nindent 4 }}
data:
  flomesh.io_clusters.yaml: |
{{ (.Files.Get "apis/flomesh.io_clusters.yaml") | indent 4 }}
  flomesh.io_proxyprofiles.yaml: |
{{ (.Files.Get "apis/flomesh.io_proxyprofiles.yaml") | indent 4 }}
  flomesh.io_mcs-api.yaml: |
{{ (.Files.Get "apis/flomesh.io_mcs-api.yaml") | indent 4 }}
  {{- if and .Values.fsm.gatewayApi.enabled (not .Values.fsm.ingress.enabled )}}
  gateway-api.yaml: |
{{ (.Files.Get "apis/gateway-api.yaml") | indent 4 }}
  {{- end }}
  {{- if and .Values.fsm.ingress.enabled .Values.fsm.ingress.namespaced (not .Values.fsm.gatewayApi.enabled) }}
  flomesh.io_namespacedingresses.yaml: |
{{ (.Files.Get "apis/flomesh.io_namespacedingresses.yaml") | indent 4 }}
  {{- end }}
